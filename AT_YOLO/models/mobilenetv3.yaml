# YOLOv5 ğŸš€ by Ultralytics, GPL-3.0 license

# Parameters
nc: 6  # number of classes
#depth_multipleå’Œwidth_multipleè¶Šå¤§ï¼Œè¡¨ç¤ºè¯¥ç½‘ç»œç»“æ„è¶Šå¤æ‚ï¼Œæ£€æµ‹çš„ç²¾å‡†åº¦è¶Šé«˜ï¼Œä½†æ˜¯è®­ç»ƒæ£€æµ‹é€Ÿåº¦ä¼šè¶Šæ¥è¶Šæ…¢ã€‚ å¯ä»¥å»å¯¹æ¯”ä¸€ä¸‹yolov5çš„å‡ ä¸ªå°ºå¯¸ï¼Œä»–ä»¬å°±åœ¨è¿™å„¿æœ‰ä¸åŒã€‚
depth_multiple: 1.0  # model depth multiple  æ¨¡å‹æ·±åº¦å€æ•°
width_multiple: 1.0  # layer channel multiple      é€šé“å€æ•°   ï¼ˆå› ä¸ºè¾“å‡ºçš„ç‰¹å¾é€šé“è¶Šå¤šåˆ™è¶Šå®½ï¼Œæ‰€ä»¥æ˜¯å«å®½åº¦å€æ•°ï¼‰
anchors:
  - [10,13, 16,30, 33,23]  # P3/8 ä½å±‚      #åœ¨åœ°å±‚ä¸‹å®šä¹‰äº†ä¸‰ä¸ªanchor åˆ†åˆ«æ˜¯10Ã—13ã€16Ã—30ã€33Ã—23
  - [30,61, 62,45, 59,119]  # P4/16 ä¸­å±‚
  - [116,90, 156,198, 373,326]  # P5/32 é«˜å±‚

   # Mobilenetv3-small backbone
   # MobileNetV3_InvertedResidual [out_ch, hid_ch, k_s, stride, SE, HardSwish]
backbone:
  # [from, number, module, args]  è¿™å››ä¸ªå€¼åˆ†åˆ«æ˜¯æ¥æºã€æ¨¡å—ä¸ªæ•°ã€è¯¥å±‚çš„æ¨¡å—å±‚ã€å‚æ•°          #åé¢çš„p1ï¼Œp2ï¼Œp3ï¼Œp4ï¼Œp5è¡¨ç¤ºäº”å±‚é‡‘å­—å¡”ç»“æ„ ã€‚  p1åé¢çš„çš„æ•°è¡¨ç¤ºç¼©å°å€æ•°ã€‚           #ä¸åŒçš„å±‚æ¨¡å—éƒ½åœ¨modelsä¸‹çš„common.pyæ–‡ä»¶ä¸­æœ‰å®šä¹‰
  [[-1, 1, Conv_BN_HSwish, [16, 2]],                              # 0-p1/2    fromä¸º-1 è¡¨ç¤ºè¯¥å±‚ï¼ˆå³ç¬¬0å±‚ï¼‰æ˜¯ä»ä¸Šä¸€å±‚æ¥çš„  ã€‚ numberä¸º1ï¼Œè¡¨ç¤ºæœ‰ä¸€ä¸ªConv_BN_HSwish        #ç¬¬0å±‚æ˜¯é‡‘å­—å¡”ç¬¬ä¸€å±‚ ç»è¿‡ä¸€ä¸ªæ­¥é•¿ä¸º2çš„å·ç§¯åï¼ˆegï¼šè¾“å…¥çš„å›¾ç‰‡å°ºå¯¸ç”±640Ã—640å˜æˆäº†320Ã—320ï¼‰ï¼Œå°ºå¯¸ç¼©å°äº†ä¸€åŠï¼Œç±»ä¼¼äºé™¤ä»¥2  #è¾“å‡ºçš„ç‰¹å¾é€šé“æ•°ä¸º16 ï¼ˆå®é™…æ˜¯16ä¹˜ä»¥width_multipleï¼‰
   [-1, 1, MobileNetV3_InvertedResidual, [16,  16, 3, 2, 1, 0]],  # 1-p2/4           #åŒæ ·çš„p2/4 æ˜¯ç¬¬äºŒå±‚çš„é‡‘å­—å¡”ç»è¿‡ä¸€ä¸ªæ­¥é•¿ä¸º2çš„å·ç§¯åï¼Œæ˜¯åŸå…ˆè¾“å…¥å›¾ç‰‡å°ºå¯¸çš„å››åˆ†ä¹‹ä¸€äº†ã€‚ä»¥æ­¤ç±»æ¨
   [-1, 1, MobileNetV3_InvertedResidual, [24,  72, 3, 2, 0, 0]],  # 2-p3/8
   [-1, 1, MobileNetV3_InvertedResidual, [24,  88, 3, 1, 0, 0]],  # 3
   [-1, 1, MobileNetV3_InvertedResidual, [40,  96, 5, 2, 1, 1]],  # 4-p4/16
   [-1, 1, MobileNetV3_InvertedResidual, [40, 240, 5, 1, 1, 1]],  # 5
   [-1, 1, MobileNetV3_InvertedResidual, [40, 240, 5, 1, 1, 1]],  # 6
   [-1, 1, MobileNetV3_InvertedResidual, [48, 120, 5, 1, 1, 1]],  # 7
   [-1, 1, MobileNetV3_InvertedResidual, [48, 144, 5, 1, 1, 1]],  # 8
   [-1, 1, MobileNetV3_InvertedResidual, [96, 288, 5, 2, 1, 1]],  # 9-p5/32
   [-1, 1, MobileNetV3_InvertedResidual, [96, 576, 5, 1, 1, 1]],  # 10
   [-1, 1, MobileNetV3_InvertedResidual, [96, 576, 5, 1, 1, 1]],  # 11
  ]


# YOLOv5 v6.0 head
head:
  [[-1, 1, Conv, [96, 1, 1]],  # 12
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],            #Upsampleæ˜¯ä¸Šé‡‡æ ·
   [[-1, 8], 1, Concat, [1]],  # cat backbone P4      #Concatæ˜¯æ‹¼æ¥        #fromä¸­çš„[-1ï¼Œ 8] ä¸­çš„-1å’Œ8è¡¨ç¤ºæ˜¯ä»ä¸Šä¸€å±‚å’Œç¬¬8å±‚æ¥çš„
   [-1, 3, C3, [144, False]],  # 15                numberä¸º3ï¼Œè¡¨ç¤ºä¸ºæœ‰3ä¸ªC3çš„æ¨¡å—å±‚ï¼Œä¸è¿‡æœ€åä¸ä¸€å®šæ˜¯3ä¸ªï¼Œè¿˜å¾—çœ‹depth_multipleæ·±åº¦å€æ•° ï¼ˆå³3ä¹˜ä»¥depth_multipleï¼‰

   [-1, 1, Conv, [144, 1, 1]], # 16
   [-1, 1, nn.Upsample, [None, 2, 'nearest']],
   [[-1, 3], 1, Concat, [1]],  # cat backbone P3
   [-1, 3, C3, [168, False]],  # 19 (P3/8-small)    #ä½å±‚  ç”¨äºæ£€æµ‹å°ç›®æ ‡

   [-1, 1, Conv, [168, 3, 2]],
   [[-1, 16], 1, Concat, [1]], # cat head P4
   [-1, 3, C3, [312, False]],  # 22 (P4/16-medium)        #ä¸­å±‚       ç”¨äºæ£€æµ‹ä¸­ç›®æ ‡

   [-1, 1, Conv, [312, 3, 2]],
   [[-1, 12], 1, Concat, [1]], # cat head P5
   [-1, 3, C3, [408, False]],  # 25 (P5/32-large)            #é«˜å±‚          ç”¨äºæ£€æµ‹å¤§ç›®æ ‡

   [[19, 22, 25], 1, Detect, [nc, anchors]],  # Detect(P3, P4, P5)
  ]